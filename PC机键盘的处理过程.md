### PC机键盘的处理过程
键盘输入的处理过程  
1. 键盘输入  
2. 引发9号中断  
3. 执行int 9中断例程  
键盘上的每一个键相当于一个开关，键盘中有一个芯片对键盘上的每一个键的开关状态进行扫描。  
按下一个键时的操作
开关接通，该芯片就产生一个扫描码，扫描码说明了按下的键在家盘上的位置。  
扫描码被送入主板上的相关接口芯片的寄存器中，该寄存器的端口地址为60H。  
松开按下的键时的操作  
产生一个扫描码，扫描码说明了松开的键在键盘上的位置。  
松开按键时产生的扫描码也被送入60H端口中。  
扫描码--长度为一个字节的编码  
按下一个键时产生的扫描码--通码，通码的第7位为0  
松开一个键时产生的扫描码--断码，断码的第7位为1.  
例如: g键的通码为22H,断码位a2H  
G键的通码为0010 0010  
G键的断码为1010 0010  
一个键的通码+80H=其断码  
#### PC机键盘的处理过程--引发中断  
键盘的输入到达60H端口时，相关芯片就会向CPU发出中断类型码为9的可屏蔽中断信息。  
CPU检测到该中断信息后，如果IF=1,则响应中断，引发中断过程，转去执行int 9中断例程。  
#### 输入的字符键值如何保存?  
有BIOS键盘缓冲区  
BIOS键盘缓冲区:是系统启动后，BIOS用于存放int 9中断例程所接收的键盘输入的内存区。  
BIOS键盘缓冲区:可以存放15个键盘输入,一个键盘输入用一个字单元存放，高位字节存放扫描码，低位字节存放字符码。  
#### 输入了控制键和切换键，如何处理?  
0040:17地址会存放键盘状态字节  
一个字节中:  
第7号存放:insert  
第6号存放:CapsLock  
第5号存放:NumLock  
第4号存放:ScrollLock  
第3号存放:Alt  
第2号存放:Ctrl  
第1号存放:做shift  
第0号存放:右shift  
### 执行int 9中断例程的流程  
1. 读出60H端口的扫描码  
2. 根据扫描码分情况对待。  
   如果是字符键的扫描码，将该扫描码和它所对应的字符码(即ASCII码)送入内存中的BIOS键盘缓冲区  
   如果是控制键(比如CTRL)和切换键(比如CapsLock)的扫描码，则将其转变为状态字节(用二进制位记录控制键和切换键状态的字节)写入内存中存储状态字节的单元。  
3. 对键盘系统进行相关的控制，如向相关芯片发出应答信息。  