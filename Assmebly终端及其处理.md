### 中断的概念
中断:CPU不再接着(刚执行完成的指令)向下执行，而是转去处理中段信息。   
内中断:由CPU内部发生的事件而引起的中断。  
外中断:由外部设备发生的事件引起的中断。  
#### 8086的内中断
CPU内部产生的中断信息  
除法错误,比如:执行div指令产生的除法溢出  
单步执行  
执行into指令(比如,整数加法溢出了)  
执行int指令  
8086的终端执行码:  
(1) 除法错误:0  
(2) 单步执行:1  
(3) 执行into指令:4  
(4) 执行int n指令,立即数n为中断类型码
#### lea指令
lea指令，获取标号地址指令,load effective address指令  
#### 中断示例
```
assume cs:codesg,ss:stacksg,ds:datasg
stacksg segment
    db 200h dup(0)
stacksg ends
datasg segment
    szmsg db 13,10,'hello world!',13,10,'$' ;13 10 ASCII码值的换行符  
datasg ends
codesg segment
start:
    mov ax,datasg
    mov ds,ax
    lea dx,szmsg
    mov ah,9    ; 中断功能号9，显示ds为段地址，dx为偏移地址的以'$'结尾的字符串信息。
    int 21h     ; 21h终端类型码,并按照ah中存放的功能号，执行操作

    mov ax,4c00h
    int 21h
codesg ends
end start
```
### 中断处理程序
CPU接到中断信息之后，会执行中断处理程序。  
中断处理程序的入口地址与终端信息有某种联系，CPU根据终端信息可以找到要执行的处理程序。  
中断向量表:  
由中断类型码,查表得到中断处理程序的入口地址,从而定位终端处理程序。  
这种类似于代码的直接定址表,只不过中断向量表的存储的地址是4个字节的。高2两字节保存CS段地址,低2字节保存IP偏移地址。  
计算其程序地址的公式:(IP)=(N*4),(CS)=(N*4+2)  
### 中断过程
1. 从中断信息中取得中断类型码  
2. 标志寄存器的值入栈--中断过程中药改变标志寄存器的值，需要先行保护
3. 设置标志寄存器的第8位TF和第9位IF的值为0
4. CS的内容入栈
5. IP的内容入栈(记录源程序执行的位置)
6. 从中断向量表读取中断处理程序的入口地址，设置IP和CS。
7. 中断程序执行完毕后，IP,CS,标志位寄存器TF和IF位出栈，返回到源程序执行位置。